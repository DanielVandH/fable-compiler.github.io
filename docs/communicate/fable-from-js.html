<html class="has-navbar-fixed-top"><head><title>Call Fable from JavaScript Â· Fable</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" type="text/css" href="/docs/style.css"/><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"/><script src="https://polyfill.app/api/polyfill?features=scroll-behavior"></script><script type="text/javascript">
var nacara = {};
                                    </script><script type="text/javascript">window.addEventListener("DOMContentLoaded", () => {
    /*
     * Initialize the menu state
     */

    // Set as active the menu for the current page
    document
        .querySelectorAll(`.menu [data-menu-id='${nacara.pageId}']`)
        .forEach(function (menuItem) {
            menuItem.classList.add("is-active")
        });

    // Collapse menu-group which doesn't concerns the current page
    document
        .querySelectorAll(`.menu .menu-group`)
        .forEach(function (menuGroup) {
            var parentChildren = Array.from(menuGroup.parentElement.children);
            var subItems = parentChildren.find(function (child) {
                return child.nodeName === "UL";
            });

            var activeMenu =
                Array.from(subItems.children)
                    .find(function (child) {
                        return child.firstChild.classList.contains("is-active")
                    });

            if (activeMenu === undefined) {
                menuGroup.classList.remove("is-expanded");
                subItems.style.display = "none";
            } else {
                menuGroup.classList.add("is-expanded");
                subItems.style.display = "block";
            }
        });

    // Register listener to handle menu-group
    document
        .querySelectorAll(`.menu .menu-group`)
        .forEach(function (menuGroup) {
            menuGroup.addEventListener("click", function (ev) {
                // All the menu "calculation" are done relative to the .menu-group element
                var menuGroup =
                    ev.target.classList.contains("menu-group")
                        ? ev.target
                        : ev.target.closest(".menu-group");

                var parentChildren = Array.from(menuGroup.parentElement.children);

                var subItems =
                    parentChildren.find(function (child) {
                        return child.nodeName === "UL";
                    });

                if (menuGroup.classList.contains("is-expanded")) {
                    menuGroup.classList.remove("is-expanded");
                    subItems.style.display = "none";
                } else {
                    menuGroup.classList.add("is-expanded");
                    subItems.style.display = "block";
                }

            });
        });

    /*
     * Setup menu navigation via Next and Previous button
     */

    // Start the counter from -1, but the first menu item will be 0
    let computedMaxRank = -1;

    document
        .querySelectorAll(`.menu [data-menu-id]`)
        .forEach(function (menuItem) {
            computedMaxRank++;
            menuItem.setAttribute("data-menu-rank", computedMaxRank);
        });

    document
        .querySelector(".navigate-to-previous")
        .addEventListener("click", () => {
            const currentMenuRank =
                document
                    .querySelector(`.menu [data-menu-id='${nacara.pageId}']`)
                    .getAttribute("data-menu-rank");

            const previousRank = parseInt(currentMenuRank) - 1;

            if (previousRank >= 0) {
                document
                    .querySelector(`.menu [data-menu-rank='${previousRank}']`)
                    .click();
            }
        });

    document
        .querySelector(".navigate-to-next")
        .addEventListener("click", () => {
            const currentMenuRank =
                document
                    .querySelector(`.menu [data-menu-id='${nacara.pageId}']`)
                    .getAttribute("data-menu-rank")

            const nextRank = parseInt(currentMenuRank) + 1;

            if (nextRank <= computedMaxRank) {
                document
                    .querySelector(`.menu [data-menu-rank='${nextRank}']`)
                    .click();
            }
        });

    // IIFE function in order to not pollute the function scope
    (() => {

        // The menu is an optional element, if no menu found then hide the Next & Previous buttons
        if (document.querySelector(".menu") === null) {
            document.querySelector(".navigate-to-next").style.visibility = "hidden"
            document.querySelector(".navigate-to-previous").style.visibility = "hidden"
            return;
        }

        const currentMenuRank =
            parseInt(
                document
                    .querySelector(`.menu [data-menu-id='${nacara.pageId}']`)
                    .getAttribute("data-menu-rank")
            );

        // Initialize the text of the Previous button
        if (currentMenuRank >= 1) {
            const previousText =
                document
                    .querySelector(`.menu [data-menu-rank='${currentMenuRank - 1}']`)
                    .textContent;

            document
                .querySelector(".navigate-to-previous .text")
                .textContent = previousText;
        }

        // Initialize the text of the Next button
        if (currentMenuRank < computedMaxRank) {
            const previousText =
                document
                    .querySelector(`.menu [data-menu-rank='${currentMenuRank + 1}']`)
                    .textContent;

            document
                .querySelector(".navigate-to-next .text")
                .textContent = previousText;
        }

        // Hide the navigation button depending on the page rank
        if (currentMenuRank == 0) {
            document.querySelector(".navigate-to-previous").style.visibility = "hidden";
        } else if (currentMenuRank == computedMaxRank) {
            document.querySelector(".navigate-to-next").style.visibility = "visibile";
        }
    })();


    /*
     * Setup menu burger behaviour
     */

    // Code copied from Bulma documentation
    // https://bulma.io/documentation/components/navbar/#navbar-menu

    // Get all "navbar-burger" elements
    const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);

    // Check if there are any navbar burgers
    if ($navbarBurgers.length > 0) {

        // Add a click event on each of them
        $navbarBurgers.forEach(el => {
            el.addEventListener('click', () => {

                // Get the target from the "data-target" attribute
                const target = el.dataset.target;
                const $target = document.getElementById(target);

                // Toggle the "is-active" class on both the "navbar-burger" and the "navbar-menu"
                el.classList.toggle('is-active');
                $target.classList.toggle('is-active');

            });
        });
    }

    const mobileMenuTrigger = document.querySelector(".mobile-menu .menu-trigger");

    if (mobileMenuTrigger !== null) {
        mobileMenuTrigger
            .addEventListener("click", () => {
                document
                    .querySelector(".is-menu-column")
                    .classList
                    .toggle("force-show");
        });
    }

});
</script></head><body><nav class="navbar is-fixed-top"><div class="container"><div class="navbar-brand"><a class="navbar-item title is-4" href="https://fable.io/docs/">Fable</a><a class="navbar-item is-hidden-desktop" href="https://github.com/fable-compiler/fable" target="_blank" style="color:#24292e"><span class="icon"><i class=" fab fa-github fa-lg"></i></span></a><a class="navbar-item is-hidden-desktop" href="https://twitter.com/FableCompiler" target="_blank" style="color:#55acee"><span class="icon"><i class=" fab fa-twitter fa-lg"></i></span></a><div class="navbar-burger" data-target="nav-menu"><span></span><span></span><span></span></div></div><div class="navbar-menu" id="nav-menu"><div class="navbar-start"></div><div class="navbar-end"><a class="navbar-item" href="https://fable.io/repl/" target="_self"><span>Try online</span></a><a class="navbar-item" href="https://gitter.im/fable-compiler/Fable" target="_blank" style="color:#24292e"><span class="icon"><i class=" fab fa-gitter fa-lg"></i></span><span>Chat</span></a><a class="navbar-item is-hidden-touch" href="https://github.com/fable-compiler/fable" target="_blank" style="color:#24292e"><span class="icon"><i class=" fab fa-github fa-lg"></i></span></a><a class="navbar-item is-hidden-touch" href="https://twitter.com/FableCompiler" target="_blank" style="color:#55acee"><span class="icon"><i class=" fab fa-twitter fa-lg"></i></span></a></div></div></div></nav><div class="container"><div><div class="mobile-menu is-hidden-desktop"><nav class="breadcrumb"><ul><li class=""><a class="menu-trigger"><span class="icon"><i class=" fas fa-bars"></i></span></a></li><li class="is-active"><a>Communicate with Javascript</a></li><li class="is-active"><a>Call Fable from JavaScript</a></li></ul></nav></div><div class="columns is-mobile is-gapless"><div class="column is-hidden-touch is-menu-column is-2-desktop" style="padding-left:1.5rem !important"><div class="menu-container full-height-scrollable-content"><aside class="menu" style="margin-top:3.25rem"><p class="menu-label">Introduction</p><ul class="menu-list"><li><a class="" href="/docs/index.html" data-menu-id="index">What is Fable?</a></li><li><a class="" href="/docs/introduction/net-users-read-this.html" data-menu-id="introduction/net-users-read-this">Are you a .NET developer?</a></li><li><a class="" href="/docs/introduction/js-users-read-this.html" data-menu-id="introduction/js-users-read-this">Are you a JS developer?</a></li></ul><p class="menu-label">New to F#?</p><ul class="menu-list"><li><a class="" href="/docs/new-to-fsharp/learning-the-language.html" data-menu-id="new-to-fsharp/learning-the-language">Learning the language</a></li><li><a class="" href="/docs/new-to-fsharp/let-keyword.html" data-menu-id="new-to-fsharp/let-keyword">The let keyword</a></li></ul><p class="menu-label">Fable in 2 steps</p><ul class="menu-list"><li><a class="" href="/docs/2-steps/setup.html" data-menu-id="2-steps/setup">Setup</a></li><li><a class="" href="/docs/2-steps/your-first-fable-project.html" data-menu-id="2-steps/your-first-fable-project">Start a new project</a></li></ul><p class="menu-label">Your Fable project</p><ul class="menu-list"><li><a class="" href="/docs/your-fable-project/project-file.html" data-menu-id="your-fable-project/project-file">The project file</a></li><li><a class="" href="/docs/your-fable-project/use-a-fable-library.html" data-menu-id="your-fable-project/use-a-fable-library">Use a Fable library</a></li><li><a class="" href="/docs/your-fable-project/author-a-fable-library.html" data-menu-id="your-fable-project/author-a-fable-library">Author a Fable library</a></li><li><a class="" href="/docs/your-fable-project/build-and-run.html" data-menu-id="your-fable-project/build-and-run">Build &amp; run</a></li><li><a class="" href="/docs/your-fable-project/testing.html" data-menu-id="your-fable-project/testing">Testing</a></li></ul><p class="menu-label">Communicate with Javascript</p><ul class="menu-list"><li><a class="" href="/docs/communicate/js-from-fable.html" data-menu-id="communicate/js-from-fable">Call JS from Fable</a></li><li><a class="" href="/docs/communicate/fable-from-js.html" data-menu-id="communicate/fable-from-js">Call Fable from JavaScript</a></li></ul><p class="menu-label">From .NET to Fable</p><ul class="menu-list"><li><a class="" href="/docs/dotnet/compatibility.html" data-menu-id="dotnet/compatibility">.NET and F# compatibility</a></li><li><a class="" href="/docs/dotnet/numbers.html" data-menu-id="dotnet/numbers">Numeric types</a></li></ul><p class="menu-label">Miscellaneous</p><ul class="menu-list"><li><a class="" href="/docs/miscellaneous/official-samples.html" data-menu-id="miscellaneous/official-samples">Check official samples</a></li><li><a class="" href="/docs/miscellaneous/awesome-list.html" data-menu-id="miscellaneous/awesome-list">Awesome Fable</a></li><li><a class="" href="/docs/miscellaneous/fable-in-videos.html" data-menu-id="miscellaneous/fable-in-videos">Fable in videos</a></li></ul></aside></div></div><div class="column full-height-scrollable-content toc-scrollable-container is-main-content is-full-touch is-8-desktop" style="scroll-behavior:smooth;overflow-x:hidden"><section class="section"><div class="content"><header class="page-header"><a class="button is-pulled-right is-primary is-outlined is-hidden-touch" target="_blank" href="https://github.com/fable-compiler/fable-compiler.github.io/edit/dev/docsrc/communicate/fable-from-js.md">Edit</a><h1>Call Fable from JavaScript</h1></header><div><p></p>
<p>Sometimes, we'd like to use the power of Fable into our JavaScript apps. For instance, to create a new
<a href="https://nodered.org/docs/creating-nodes/first-node">js node in Node-RED</a> or call some handy F# code from our new Node.js serverless function or even call some powerful json parsing into our JavaScript app.</p>
<p>It may allow you to play with Fable and add features, one at a time. So what does it take to call Fable from JavaScript? First you need to understand a bit how the generated JS code looks like so you can call it correctly.</p>
<blockquote>
<p>Remember you can use the <a href="https://fable.io/repl/">Fable REPL</a> to easily check the generated JS for your F# code!</p>
</blockquote>
<h2>Name mangling <a href="#Name-mangling" aria-hidden="true"><span class="anchor" id="Name-mangling"></span>#</a></h2>
<p>Because JS doesn't support overloading or multiple modules in a single file, Fable needs to mangle the name of some members to avoid clashes, which makes it difficult to call such functions or values from JS. However, there're some cases where Fable guarantees names won't change in order to improve interop:</p>
<ul>
<li>Record fields</li>
<li>Interface and abstract members</li>
<li>Functions and values in the root module</li>
</ul>
<p>What's a root module? Because F# accepts multiple modules in the same file, we consider the root module the first one containing actual members and is not nested by any other.</p>
<pre style="background-color: #FAFAFA;color: ;padding: 1em"><code><span style="color: #A0A1A7;font-style: italic">// It doesn&#039;t matter if we have a long namespace, Fable only starts</span>
<span style="color: #A0A1A7;font-style: italic">// counting when it finds actual code</span>
<span style="color: #A626A4">module</span><span style="color: #4078F2"> A.Long.Namespace.RootModule</span>

<span style="color: #A0A1A7;font-style: italic">// The name of this function will be the same in JS</span>
<span style="color: #A626A4">let</span><span> </span><span style="color: #E45649">add</span><span style="color: #383A42"> </span><span style="color: #A626A4">(</span><span style="color: #383A42">x</span><span style="color: #A626A4">:</span><span> </span><span style="color: #C18401">int</span><span style="color: #A626A4">)</span><span> </span><span style="color: #A626A4">(</span><span style="color: #383A42">y</span><span style="color: #A626A4">:</span><span> </span><span style="color: #C18401">int</span><span style="color: #A626A4">)</span><span> </span><span style="color: #A626A4">=</span><span> x </span><span style="color: #A626A4">+</span><span> y</span>

<span style="color: #A626A4">module</span><span style="color: #4078F2"> Nested </span><span style="color: #A626A4">=</span>
<span>    </span><span style="color: #A0A1A7;font-style: italic">// This will be prefixed with the name of the module in JS</span>
<span>    </span><span style="color: #A626A4">let</span><span> </span><span style="color: #E45649">add</span><span style="color: #383A42"> </span><span style="color: #A626A4">(</span><span style="color: #383A42">x</span><span style="color: #A626A4">:</span><span> </span><span style="color: #C18401">int</span><span style="color: #A626A4">)</span><span> </span><span style="color: #A626A4">(</span><span style="color: #383A42">y</span><span style="color: #A626A4">:</span><span> </span><span style="color: #C18401">int</span><span style="color: #A626A4">)</span><span> </span><span style="color: #A626A4">=</span><span> x </span><span style="color: #A626A4">*</span><span> y</span></code></pre>
<p>In F# it's possible to have more than one root module in a single file, in that case everything will be mangled. You should avoid this pattern if you want to expose code to JS:</p>
<pre style="background-color: #FAFAFA;color: ;padding: 1em"><code><span style="color: #A626A4">namespace</span><span style="color: #4078F2"> SharedNamespace</span>

<span style="color: #A0A1A7;font-style: italic">// Here both functions will be mangled</span>
<span style="color: #A0A1A7;font-style: italic">// to prevent name conflicts</span>
<span style="color: #A626A4">module</span><span style="color: #4078F2"> Foo </span><span style="color: #A626A4">=</span>
<span>    </span><span style="color: #A626A4">let</span><span> </span><span style="color: #E45649">add</span><span style="color: #383A42"> x y </span><span style="color: #A626A4">=</span><span> x </span><span style="color: #A626A4">+</span><span> y</span>

<span style="color: #A626A4">module</span><span style="color: #4078F2"> Bar </span><span style="color: #A626A4">=</span>
<span>    </span><span style="color: #A626A4">let</span><span> </span><span style="color: #E45649">add</span><span style="color: #383A42"> x y </span><span style="color: #A626A4">=</span><span> x </span><span style="color: #A626A4">*</span><span> y</span></code></pre>
<h2>Common types and objects <a href="#Common-types-and-objects" aria-hidden="true"><span class="anchor" id="Common-types-and-objects"></span>#</a></h2>
<p>Some F#/.NET types have <a href="/../dotnet/compatibility.html">counterparts in JS</a>. Fable takes advantage of this to compile to native types that are more performant and reduce bundle size. You can also use this to improve interop when exchanging data between F# and JS. The most important common types are:</p>
<ul>
<li><strong>Strings and booleans</strong> behave the same in F# and JS.</li>
<li><strong>Chars</strong> are compiled as JS strings of length 1. This is mainly because string indexing in JS gives you another string. But you can use a char as a number with a explicit conversion like <code>int16 'å®¶'</code>.</li>
<li><strong>Numeric types</strong> compile to JS numbers, except for <code>long</code>, <code>decimal</code> and <code>bigint</code>.</li>
<li><strong>Arrays</strong> (and <code>ResizeArray</code>) compile to JS arrays. <em>Numeric arrays</em> compile to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray">Typed Arrays</a> in most situations, though this shouldn't make a difference for most common operations like indexing, iterating or mapping. You can disable this behavior with <a href="https://www.npmjs.com/package/fable-loader#options">the <code>typedArrays</code> option</a>.</li>
<li>Any <strong>IEnumerable</strong> (or <code>seq</code>) can be traversed in JS as if it were an <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_Generators#Iterables">Iterable</a>.</li>
<li><strong>DateTime</strong> compiles to JS <code>Date</code>.</li>
<li><strong>Regex</strong> compiles to JS <code>RegExp</code>.</li>
<li>Mutable <strong>dictionaries</strong> (not F# maps) compile to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map">ES2015 Map</a>.</li>
<li>Mutable <strong>hashsets</strong> (not F# sets) compile to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set">ES2015 Set</a>.</li>
</ul>
<blockquote>
<p>If the dictionary or hashset requires custom or structural equality, Fable will generate a custom type, but it will share the same properties as JS maps and sets.</p>
</blockquote>
<ul>
<li><strong>Objects</strong>: As seen above, only record fields and interface members will be attached to objects without name mangling. Take this into account when sending to or receiving an object from JS.</li>
</ul>
<pre style="background-color: #FAFAFA;color: ;padding: 1em"><code><span style="color: #A626A4">type</span><span> </span><span style="color: #C18401">MyRecord</span><span> </span><span style="color: #A626A4">=</span>
<span>    </span><span style="color: #A626A4">{</span><span> Value</span><span style="color: #A626A4">:</span><span> </span><span style="color: #C18401">int</span>
<span>      Add</span><span style="color: #A626A4">:</span><span> </span><span style="color: #C18401">int </span><span style="color: #A626A4">-&gt;</span><span style="color: #C18401"> int </span><span style="color: #A626A4">-&gt;</span><span style="color: #C18401"> int </span><span style="color: #A626A4">}</span>
<span>    </span><span style="color: #A626A4">member</span><span> </span><span style="color: #E45649">this.FiveTimes</span><span style="color: #986801">()</span><span> </span><span style="color: #A626A4">=</span>
<span>        this.Value </span><span style="color: #A626A4">*</span><span> </span><span style="color: #986801">5</span>

<span style="color: #A626A4">type</span><span> </span><span style="color: #C18401">IMyInterface</span><span> </span><span style="color: #A626A4">=</span>
<span>    </span><span style="color: #A626A4">abstract</span><span> Square</span><span style="color: #A626A4">:</span><span> </span><span style="color: #C18401">unit</span><span> </span><span style="color: #A626A4">-&gt;</span><span> </span><span style="color: #C18401">float</span>

<span style="color: #A626A4">type</span><span> </span><span style="color: #C18401">MyClass</span><span style="color: #A626A4">(</span><span style="color: #383A42">value</span><span style="color: #A626A4">:</span><span style="color: #C18401"> float</span><span style="color: #A626A4">)</span><span> </span><span style="color: #A626A4">=</span>
<span>    </span><span style="color: #A626A4">member</span><span> </span><span style="color: #E45649">__.Value</span><span> </span><span style="color: #A626A4">=</span><span> value</span>
<span>    </span><span style="color: #A626A4">interface</span><span> IMyInterface </span><span style="color: #A626A4">with</span>
<span>        </span><span style="color: #A626A4">member</span><span> </span><span style="color: #E45649">__.Square</span><span style="color: #986801">()</span><span> </span><span style="color: #A626A4">=</span><span> value </span><span style="color: #A626A4">*</span><span> value</span>

<span style="color: #A626A4">let</span><span> </span><span style="color: #E45649">createRecord</span><span style="color: #A626A4">(</span><span style="color: #383A42">value</span><span style="color: #A626A4">:</span><span> </span><span style="color: #C18401">int</span><span style="color: #A626A4">)</span><span> </span><span style="color: #A626A4">=</span>
<span>    </span><span style="color: #A626A4">{</span><span> Value </span><span style="color: #A626A4">=</span><span> value</span>
<span>      Add </span><span style="color: #A626A4">=</span><span> </span><span style="color: #A626A4">fun</span><span style="color: #383A42"> x y </span><span style="color: #A626A4">-&gt;</span><span> x </span><span style="color: #A626A4">+</span><span> y </span><span style="color: #A626A4">}</span>

<span style="color: #A626A4">let</span><span> </span><span style="color: #E45649">createClass</span><span style="color: #A626A4">(</span><span style="color: #383A42">value</span><span style="color: #A626A4">:</span><span> </span><span style="color: #C18401">float</span><span style="color: #A626A4">)</span><span> </span><span style="color: #A626A4">=</span>
<span>    MyClass</span><span style="color: #A626A4">(</span><span>value</span><span style="color: #A626A4">)</span></code></pre>
<pre style="background-color: #FAFAFA;color: ;padding: 1em"><code><span style="color: #A626A4">import</span><span> </span><span style="color: #383A42">{</span><span> </span><span style="color: #E45649">createRecord</span><span style="color: #383A42">,</span><span> </span><span style="color: #E45649">createClass</span><span> </span><span style="color: #383A42">}</span><span> </span><span style="color: #A626A4">from</span><span> </span><span style="color: #50A14F">&quot;./Tests.fs&quot;</span>

<span style="color: #A626A4">var</span><span> </span><span style="color: #383A42">record</span><span> </span><span style="color: #0184BC">=</span><span> </span><span style="color: #4078F2">createRecord</span><span style="color: #383A42">(</span><span style="color: #986801">2</span><span style="color: #383A42">);</span>

<span style="color: #A0A1A7;font-style: italic">// Ok, we&#039;re calling a record field</span>
<span style="color: #E45649">record</span><span style="color: #383A42">.</span><span style="color: #4078F2">Add</span><span style="color: #383A42">(</span><span style="color: #E45649">record</span><span style="color: #383A42">.</span><span style="color: #E45649">Value</span><span style="color: #383A42">,</span><span> </span><span style="color: #986801">2</span><span style="color: #383A42">);</span><span> </span><span style="color: #A0A1A7;font-style: italic">// 4</span>

<span style="color: #A0A1A7;font-style: italic">// Fails, this member is not actually attached to the object</span>
<span style="color: #E45649">record</span><span style="color: #383A42">.</span><span style="color: #4078F2">FiveTimes</span><span style="color: #383A42">();</span>

<span style="color: #A626A4">var</span><span> </span><span style="color: #383A42">myClass</span><span> </span><span style="color: #0184BC">=</span><span> </span><span style="color: #4078F2">createClass</span><span style="color: #383A42">(</span><span style="color: #986801">5</span><span style="color: #383A42">);</span>

<span style="color: #A0A1A7;font-style: italic">// Fails</span>
<span style="color: #E45649">myClass</span><span style="color: #383A42">.</span><span style="color: #E45649">Value</span><span style="color: #383A42">;</span>

<span style="color: #A0A1A7;font-style: italic">// Ok, this is an interface member</span>
<span style="color: #E45649">myClass</span><span style="color: #383A42">.</span><span style="color: #4078F2">Square</span><span style="color: #383A42">();</span><span> </span><span style="color: #A0A1A7;font-style: italic">// 25</span></code></pre>
<h2>Functions: automatic uncurrying <a href="#Functions:-automatic-uncurrying" aria-hidden="true"><span class="anchor" id="Functions:-automatic-uncurrying"></span>#</a></h2>
<p>Fable will automatically uncurry functions in many situations: when they're passed as functions, when set as a record field... So in most cases you can pass them to and from JS as if they were functions without curried arguments.</p>
<pre style="background-color: #FAFAFA;color: ;padding: 1em"><code><span style="color: #A626A4">let</span><span> </span><span style="color: #E45649">execute</span><span style="color: #383A42"> </span><span style="color: #A626A4">(</span><span style="color: #383A42">f</span><span style="color: #A626A4">:</span><span> </span><span style="color: #C18401">int</span><span style="color: #A626A4">-&gt;</span><span style="color: #C18401">int</span><span style="color: #A626A4">-&gt;</span><span style="color: #C18401">int</span><span style="color: #A626A4">)</span><span> </span><span style="color: #383A42">x y </span><span style="color: #A626A4">=</span>
<span>    f x y</span></code></pre>
<pre style="background-color: #FAFAFA;color: ;padding: 1em"><code><span style="color: #A626A4">import</span><span> </span><span style="color: #383A42">{</span><span> </span><span style="color: #E45649">execute</span><span> </span><span style="color: #383A42">}</span><span> </span><span style="color: #A626A4">from</span><span> </span><span style="color: #50A14F">&quot;./TestFunctions.fs&quot;</span>

<span style="color: #4078F2">execute</span><span style="color: #383A42">(</span><span style="color: #A626A4">function</span><span> </span><span style="color: #383A42">(x,</span><span> </span><span style="color: #383A42">y)</span><span> </span><span style="color: #383A42">{</span><span> </span><span style="color: #A626A4">return</span><span> </span><span style="color: #383A42">x</span><span> </span><span style="color: #0184BC">*</span><span> </span><span style="color: #383A42">y</span><span> </span><span style="color: #383A42">},</span><span> </span><span style="color: #986801">3</span><span style="color: #383A42">,</span><span> </span><span style="color: #986801">5</span><span style="color: #383A42">)</span><span> </span><span style="color: #A0A1A7;font-style: italic">// 15</span></code></pre>
<blockquote>
<p>Check <a href="https://fsharpforfunandprofit.com/posts/currying/">this</a> for more information on function currying in F# (and other functional languages).</p>
</blockquote>
<h2>Call Fable source code from a JS file <a href="#Call-Fable-source-code-from-a-JS-file" aria-hidden="true"><span class="anchor" id="Call-Fable-source-code-from-a-JS-file"></span>#</a></h2>
<p>Webpack makes it very easy to include files in different programming languages in your project by using loaders. Because in a Fable project we assume you're already using the <a href="https://www.npmjs.com/package/fable-loader">fable-loader</a>, if you have a file like the following:</p>
<pre style="background-color: #FAFAFA;color: ;padding: 1em"><code><span style="color: #A626A4">module</span><span style="color: #4078F2"> HelloFable</span>

<span style="color: #A626A4">let</span><span> </span><span style="color: #E45649">sayHelloFable</span><span style="color: #986801">()</span><span> </span><span style="color: #A626A4">=</span><span> </span><span style="color: #50A14F">&quot;Hello Fable!&quot;</span></code></pre>
<p>Importing and using it from JS is as simple as if it were another JS file:</p>
<pre style="background-color: #FAFAFA;color: ;padding: 1em"><code><span style="color: #A626A4">import</span><span> </span><span style="color: #383A42">{</span><span> </span><span style="color: #E45649">sayHelloFable</span><span> </span><span style="color: #383A42">}</span><span> </span><span style="color: #A626A4">from</span><span> </span><span style="color: #50A14F">&quot;./HelloFable.fs&quot;</span>

<span style="color: #C18401">console</span><span style="color: #383A42">.</span><span style="color: #0184BC">log</span><span style="color: #383A42">(</span><span style="color: #4078F2">sayHelloFable</span><span style="color: #383A42">());</span></code></pre>
<h3>Importing Fable code from Typescript <a href="#Importing-Fable-code-from-Typescript" aria-hidden="true"><span class="anchor" id="Importing-Fable-code-from-Typescript"></span>#</a></h3>
<p>For better or worse, Typescript wants to check your imported modules and because it doesn't know a thing of F#, it will complain if you try to import an .fs file:</p>
<pre style="background-color: #FAFAFA;color: ;padding: 1em"><code><span style="color: #A0A1A7;font-style: italic">// Typescript will complain because it cannot read the file</span>
<span style="color: #A626A4">import</span><span> </span><span style="color: #383A42">{</span><span> </span><span style="color: #E45649">sayHelloFable</span><span> </span><span style="color: #383A42">}</span><span> </span><span style="color: #A626A4">from</span><span> </span><span style="color: #50A14F">&quot;./HelloFable.fs&quot;</span></code></pre>
<p>To appease the Typescript compiler, we need a <a href="https://www.typescriptlang.org/docs/handbook/declaration-files/introduction.html">declaration file</a>, which also gives us the opportunity to tell Typescript what is actually exported by our Fable code. If you place a <code>HelloFable.d.ts</code> file like the following, the import above will work:</p>
<pre style="background-color: #FAFAFA;color: ;padding: 1em"><code><span style="color: #A0A1A7;font-style: italic">// Unfortunately declaration files don&#039;t accept relative paths</span>
<span style="color: #A0A1A7;font-style: italic">// so we just use the * wildcard</span>
<span style="color: #A626A4">declare</span><span> </span><span style="color: #A626A4">module</span><span> </span><span style="color: #50A14F">&quot;*HelloFable.fs&quot;</span><span> </span><span style="color: #383A42">{</span>
<span>    </span><span style="color: #A626A4">function</span><span> </span><span style="color: #4078F2">sayHelloFable</span><span style="color: #383A42">()</span><span style="color: #0184BC">:</span><span> </span><span style="color: #0184BC">string</span><span style="color: #383A42">;</span>
<span style="color: #383A42">}</span></code></pre>
<h2>Call Fable compiled code as a library <a href="#Call-Fable-compiled-code-as-a-library" aria-hidden="true"><span class="anchor" id="Call-Fable-compiled-code-as-a-library"></span>#</a></h2>
<h3>..from your web app <a href="#..from-your-web-app" aria-hidden="true"><span class="anchor" id="..from-your-web-app"></span>#</a></h3>
<p>If your project is a web app and you're using Webpack, it just takes two lines of code in the Webpack configuration in the <code>output</code> section of <code>module.exports</code>:</p>
<pre style="background-color: #FAFAFA;color: ;padding: 1em"><code><span>libraryTarget: </span><span style="color: #50A14F">&#039;var&#039;</span><span style="color: #383A42">,</span>
<span>library: </span><span style="color: #50A14F">&#039;MyFableLib&#039;</span></code></pre>
<p>For instance:</p>
<pre style="background-color: #FAFAFA;color: ;padding: 1em"><code><span>    output: </span><span style="color: #383A42">{</span>
<span>        path: </span><span style="color: #E45649">path</span><span style="color: #383A42">.</span><span style="color: #4078F2">join</span><span style="color: #383A42">(</span><span style="color: #E45649">__dirname</span><span style="color: #383A42">,</span><span> </span><span style="color: #50A14F">&quot;./public&quot;</span><span style="color: #383A42">),</span>
<span>        filename: </span><span style="color: #50A14F">&quot;bundle.js&quot;</span><span style="color: #383A42">,</span>
<span>        libraryTarget: </span><span style="color: #50A14F">&#039;var&#039;</span><span style="color: #383A42">,</span>
<span>        library: </span><span style="color: #50A14F">&#039;MyFableLib&#039;</span>
<span>    </span><span style="color: #383A42">},</span></code></pre>
<p>This tells Webpack that we want our Fable code to be available from a global variable named <code>MyFableLib</code>. That's it!</p>
<article class="message is-info">
                <div class="message-body"><p>Only the public functions and values in the <strong>last file of the project</strong> will be exposed.</p>
</div>
</article>
<h4>Let's try! <a href="#Let's-try!" aria-hidden="true"><span class="anchor" id="Let's-try!"></span>#</a></h4>
<p>Let's compile the HelloFable app from above with a webpack.config.js that includes the following:</p>
<pre style="background-color: #FAFAFA;color: ;padding: 1em"><code><span>output: </span><span style="color: #383A42">{</span>
<span>    </span><span style="color: #0184BC">...</span>
<span>    libraryTarget: </span><span style="color: #50A14F">&#039;var&#039;</span><span style="color: #383A42">,</span>
<span>    library: </span><span style="color: #50A14F">&#039;OMGFable&#039;</span>
<span style="color: #383A42">}</span></code></pre>
<p>Now let's try this directly in our <code>index.html</code> file:</p>
<pre style="background-color: #FAFAFA;color: ;padding: 1em"><code><span style="color: #383A42">&lt;</span><span style="color: #E45649">body</span><span style="color: #383A42">&gt;</span>
<span>    </span><span style="color: #383A42">&lt;</span><span style="color: #E45649">script</span><span style="color: #383A42"> </span><span style="color: #986801">src</span><span style="color: #383A42">=</span><span style="color: #50A14F">&quot;bundle.js&quot;</span><span style="color: #383A42">&gt;&lt;/</span><span style="color: #E45649">script</span><span style="color: #383A42">&gt;</span>
<span>    </span><span style="color: #383A42">&lt;</span><span style="color: #E45649">script</span><span style="color: #383A42"> </span><span style="color: #986801">type</span><span style="color: #383A42">=</span><span style="color: #50A14F">&quot;text/JavaScript&quot;</span><span style="color: #383A42">&gt;</span>
<span>      alert( OMGFable.sayHelloFable() );</span>
<span>    </span><span style="color: #383A42">&lt;/</span><span style="color: #E45649">script</span><span style="color: #383A42">&gt;</span>
<span style="color: #383A42">&lt;/</span><span style="color: #E45649">body</span><span style="color: #383A42">&gt;</span></code></pre>
<p>Et voilÃ ! We're done! You can find a <a href="https://github.com/fable-compiler/fable2-samples/tree/master/interopFableFromJS">full sample here</a>.</p>
<h3>...from your Node.js app <a href="#...from-your-Node.js-app" aria-hidden="true"><span class="anchor" id="...from-your-Node.js-app"></span>#</a></h3>
<p>Basically it's the same thing. If you want to see a complete sample using a <code>commonjs</code> output instead of <code>var</code>, please <a href="https://github.com/fable-compiler/fable2-samples/tree/master/nodejsbundle">check this project</a>. There you'll see that we've added the following lines to the Webpack config:</p>
<pre style="background-color: #FAFAFA;color: ;padding: 1em"><code><span>    library:</span><span style="color: #50A14F">&quot;app&quot;</span><span style="color: #383A42">,</span>
<span>    libraryTarget: </span><span style="color: #50A14F">&#039;commonjs&#039;</span></code></pre>
<p>and then you can call your code from JavaScript like this:</p>
<pre style="background-color: #FAFAFA;color: ;padding: 1em"><code><span style="color: #A626A4">let</span><span> </span><span style="color: #383A42">app</span><span> </span><span style="color: #0184BC">=</span><span> </span><span style="color: #0184BC">require</span><span style="color: #383A42">(</span><span style="color: #50A14F">&quot;./App.js&quot;</span><span style="color: #383A42">);</span></code></pre>
<h3>Learn more about Webpack <code>libraryTarget</code> <a href="#Learn-more-about-Webpack-libraryTarget" aria-hidden="true"><span class="anchor" id="Learn-more-about-Webpack-libraryTarget"></span>#</a></h3>
<p>If you want to know what your options are, please consult the <a href="https://webpack.js.org/configuration/output/#outputlibrarytarget">official documentation</a>.</p>
</div></div></section><div class="navigation-container"><button class="button is-outlined is-primary navigate-to-previous"><span class="icon"><i class=" fas fa-arrow-left"></i></span><span class="is-uppercase text">Previous</span></button><button class="button is-outlined is-primary navigate-to-next"><span class="is-uppercase text">Next</span><span class="icon"><i class=" fas fa-arrow-right"></i></span></button></div></div><div class="column full-height-scrollable-content toc-column is-hidden-touch is-2-desktop"><div><nav class="toc-container"><ul class="toc-headings"><div class="toc-label"><a href="#Name-mangling">Name mangling</a></div></li><div class="toc-label"><a href="#Common-types-and-objects">Common types and objects</a></div></li><div class="toc-label"><a href="#Functions:-automatic-uncurrying">Functions: automatic uncurrying</a></div></li><div class="toc-label"><a href="#Call-Fable-source-code-from-a-JS-file">Call Fable source code from a JS file</a></div><ul class="toc-headings"><li><a href="#Importing-Fable-code-from-Typescript">Importing Fable code from Typescript</a></li></ul></li><div class="toc-label"><a href="#Call-Fable-compiled-code-as-a-library">Call Fable compiled code as a library</a></div><ul class="toc-headings"><li><a href="#..from-your-web-app">..from your web app</a><ul class="toc-headings"><li><a href="#Let's-try!">Let's try!</a></li></ul></li><li><a href="#...from-your-Node.js-app">...from your Node.js app</a></li><li><a href="#Learn-more-about-Webpack-libraryTarget">Learn more about Webpack `libraryTarget`</a></li></ul></li></ul></nav></div></div></div><div class="is-hidden-touch material-like-container is-for-desktop"><div class="material-like-button scroll-to-top"><span class="icon is-medium"><i class=" fas fa-angle-up fa-lg"></i></span></div></div><div class="is-hidden-desktop material-like-container is-for-touch"><div class="material-like-container-body"><div class="material-like-button toggle-toc"><span class="icon is-medium"><i class=" fas fa-ellipsis-v fa-lg"></i></span><div class="material-like-button-label">Table of content</div></div><div class="material-like-button scroll-to-top"><span class="icon is-medium"><i class=" fas fa-angle-up fa-lg"></i></span><div class="material-like-button-label">Scroll to top</div></div></div><div class="material-like-button close-open-button"><span class="icon is-medium"><i class=" fas fa-plus fa-lg"></i></span></div></div></div><script type="text/javascript">
nacara.pageId = 'communicate/fable-from-js';
                                        </script><script type="text/javascript">window.addEventListener("DOMContentLoaded", () => {

    const refContainer = document.querySelector(".toc-scrollable-container");

    // Listener used to update the active section in the TOC
    refContainer.addEventListener("scroll", () => {
        const headers = document.querySelectorAll("h2, h3, h4");

        // In order tof in the active section, we iterate over all the header
        // from the bottom to the top.
        // We take the first header that is "above" the top position of the window + 60px
        const inversedHeaders =
            [...headers]
                .sort( (headerA, headerB) => {
                    return headerB.getBoundingClientRect().top - headerA.getBoundingClientRect().top;
                });

        let activeHeader = null;

        for (let index = 0; index < inversedHeaders.length; index++) {
            const header = inversedHeaders[index];
            if (header.getBoundingClientRect().top < 60) {
                activeHeader = header;
                break;
            }
        }


        if (activeHeader === null)
            return;

        const anchorTag = activeHeader.querySelector("a").getAttribute("href");

        // Make sure to remove `is-active` to all the TOC anchor elements
        document
            .querySelectorAll(".toc-container a")
            .forEach(anchor => {
                anchor.classList.remove("is-active");
            });

        // Set `is-active` to the current section
        document
            .querySelector(`.toc-container a[href="${anchorTag}"]`)
            .classList.add("is-active");
    });

    document
        .querySelector(".material-like-button.toggle-toc")
        .addEventListener("click", () => {
            document
                .querySelector(".toc-container")
                .classList.toggle("force-show");

            document
                .querySelector(".column.toc-column")
                .classList.toggle("force-show");
        });

});
</script><script type="text/javascript">window.addEventListener("DOMContentLoaded", () => {

    const refContainer = document.querySelector(".toc-scrollable-container");

    // Register scroll to top button
    document
        .querySelectorAll(".scroll-to-top")
        .forEach(element => {
            element.addEventListener("click", () => {
                document
                    .querySelector(".toc-scrollable-container")
                    .scrollTo(0, 0);
            });
        });

    // Listener used to update the position of TOC button at the bottom of the page
    refContainer.addEventListener("scroll", () => {

        // If we are at the end of the element
        // Source: https://developer.mozilla.org/fr/docs/Web/API/Element/scrollHeight#D%C3%A9terminer_si_un_%C3%A9l%C3%A9ment_a_compl%C3%A8tement_%C3%A9t%C3%A9_d%C3%A9fil%C3%A9
        if (refContainer.scrollTop > 30) {
            document
                .querySelector(".material-like-container.is-for-desktop")
                .classList
                .remove("hide");
        } else {
            document
                .querySelector(".material-like-container.is-for-desktop")
                .classList
                .add("hide");
        }
    });

    const bodyContainer = document.querySelector(".material-like-container.is-for-touch .material-like-container-body");

    document
        .querySelector(".material-like-button.close-open-button")
        .addEventListener("click", () => {
            bodyContainer.classList.toggle("show");
            document
                .querySelector(".material-like-button.close-open-button")
                .classList.toggle("is-open");
    });

});
</script></div></body></html>